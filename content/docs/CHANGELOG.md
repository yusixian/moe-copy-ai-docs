---
title: 更新日志
description: MoeCopy AI 的版本更新记录和新功能介绍
---

# 更新日志

## [未发布] - 2025-08-22

### 🎉 新增功能

#### 全屏预览模式
- **Markdown 全屏预览**: 在预览 Markdown 内容时，新增全屏预览按钮，提供更佳的阅读体验
- **专为弹窗环境优化**: 采用模拟全屏技术，在浏览器扩展弹窗中完美运行
- **快捷操作**: 支持 ESC 键快速退出全屏模式
- **优化布局**: 全屏模式下采用专门的样式和布局，提升内容可读性

#### 多种内容抓取模式
- **选择器模式**: 使用预定义的 CSS 选择器精确提取内容，适合结构化的博客和新闻网站
- **Readability 模式**: 集成 Mozilla Firefox 阅读模式的核心算法 [@mozilla/readability](https://github.com/mozilla/readability)，智能识别和提取文章主体内容
- **混合模式**（推荐）: 同时运行两种提取方式，通过质量评分算法自动选择最佳结果

#### 抓取模式配置界面
- 在设置页面新增"内容抓取模式"配置区域
- 提供直观的单选按钮界面，支持实时切换不同抓取模式
- 每种模式都有详细的说明和使用场景介绍
- 界面设计采用渐变色彩和动画效果，提升用户体验

### 🔧 技术改进

#### 依赖库更新
- 新增 `@mozilla/readability` v0.6.0 - Mozilla 官方的网页内容提取库
- 新增 `dompurify` v3.2.6 - 用于清理 HTML 内容，确保安全性

#### 核心功能增强
- 重构 `extractor.ts`，支持多种抓取模式的动态切换
- 新增 `readability-extractor.ts` 模块，封装 Readability.js 相关功能
- 实现内容质量评分算法，自动比较不同提取方法的结果
- 优化 HTML 到 Markdown 的转换逻辑，更好地保留文章结构

#### 测试覆盖
- 新增 `extraction-modes.test.ts` 测试文件
- 更新现有测试用例，覆盖新的抓取模式功能
- 增加 Readability 模式的专项测试

### 🐛 修复问题
- 修复某些复杂网页结构下选择器模式提取不完整的问题
- 优化内容清理逻辑，避免误删有效内容

### 📝 文档更新
- 更新 README.md，添加多种抓取模式的功能介绍
- 更新配置选项说明，增加抓取模式设置的描述
- 更新 CLAUDE.md，添加新模块的架构说明

### 🎨 用户体验
- 抓取模式选择界面采用卡片式设计，视觉层次分明
- 添加模式切换的过渡动画效果
- 为推荐的混合模式添加特殊标识
- 选中状态使用主题色高亮显示
- **全屏预览体验优化**: 全屏模式下提供专门设计的顶部导航栏和退出按钮
- **响应式移动端适配**: 优化移动设备上的按钮布局，避免界面元素拥挤

---

## 使用建议

1. **对于结构良好的博客网站**：使用"选择器模式"可获得最精确的结果
2. **对于新闻网站或复杂布局**：推荐使用"Readability 模式"
3. **不确定使用哪种模式时**：选择"混合模式"，让插件自动判断最佳结果

混合模式会同时运行两种提取算法，并通过以下维度评分选择最佳结果：
- 内容长度和完整性
- 段落结构合理性
- 标题层级组织
- HTML 标签密度（越低越好）

希望新的抓取模式能让您的内容提取体验更加顺畅！🎉